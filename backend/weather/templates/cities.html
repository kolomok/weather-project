{% load static %} {% load django_vite %}
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>{{ query }} - Погода</title>
    <link rel="icon" href="{% static 'images/logo.png' %}" />
    <link
      href="https://fonts.googleapis.com/css2?family=Unbounded:wght@200..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Прелоадер -->
    <div id="preloader">
      <div class="container">
        <div class="cloud front">
          <span class="left-front"></span>
          <span class="right-front"></span>
        </div>
        <span class="sun sunshine"></span>
        <span class="sun"></span>
        <div class="cloud back">
          <span class="left-back"></span>
          <span class="right-back"></span>
        </div>
      </div>
    </div>

    <!-- Видео -->
    <video id="bg-video" autoplay muted loop playsinline></video>

    <div class="interface">
      <!-- Навигация -->
      <nav>
        <div class="logo">
          <img src="{% static 'images/logo.png' %}" alt="logo" />
          <h1>StepWeather</h1>
        </div>
        <div class="search-container">
          <input
            type="text"
            id="search-input"
            class="search-input"
            placeholder="Найти город..."
          />
          <button id="search-btn">
            <img
              src="{% static 'images/search_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg' %}"
              alt="Поиск"
            />
          </button>
        </div>
        <div class="account">
          <button id="addbutton" data-city="{{ query }}">
            <img
              src="{% static 'images/favorite_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg' %}"
              alt=""
            />
          </button>
          <div class="buttonhover">
            <button id="accButton">
              <img
                src="{% static 'images/account_circle_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg' %}"
                alt="Аккаунт"
              />
            </button>
          </div>
        </div>
        <div class="sett" id="accSett">
          <button id="closeSett">X</button>
          <button>Войти в аккаунт</button>
          <a href="{% url 'favorites' %}">Избранное</a>
        </div>
      </nav>

      <!-- Текущая погода -->
      <header>
        <div class="weather-card" id="first-card">
          <div class="infoweathercard">
            <p>Сейчас</p>
            <img id="weather-icon" alt="" />
            <p id="temp"></p>
            <p id="description"></p>
          </div>
          <div class="infoweathercard">
            <h2 id="city">Ищем {{ query }}...</h2>
            <p id="humidity"></p>
            <p id="wind"></p>
          </div>
        </div>

        <!-- Погода по часам -->
        <div id="hours" class="hours"></div>
      </header>

      <!-- Прогноз по дням -->
      <section>
        <div id="week-forecast" class="weather-card-next-days"></div>
      </section>
    </div>

    {% vite_asset 'src/city.js' %} {% if query %}
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const input = document.getElementById("search-input");
        input.value = "{{ query }}";
        document.getElementById("search-btn").click();
      });
    </script>
    {% endif %}
  </body>
</html>
