/* empty css              */document.addEventListener("DOMContentLoaded",()=>{const g="a9c23e068a0e62f0ae23ab4a0336b395",l=document.getElementById("city"),p=document.getElementById("temp"),E=document.getElementById("description"),$=document.getElementById("humidity"),x=document.getElementById("wind"),u=document.getElementById("weather-icon"),y=document.getElementById("search-input"),S=document.getElementById("search-btn"),T=document.getElementById("accButton"),h=document.getElementById("accSett"),_=document.getElementById("closeSett");T.addEventListener("click",()=>{h.style.display=h.style.display==="flex"?"none":"flex"}),_.addEventListener("click",()=>{h.style.display=h.style.display==="flex"?"none":"flex"});function f(n){const t=document.getElementById("hours");t.innerHTML="",n.forEach(o=>{const i=new Date(o.dt_txt).getHours().toString().padStart(2,"0"),d=document.createElement("div");d.className="hour-card",d.innerHTML=`
      <p>${i}:00</p>
      <img src="https://openweathermap.org/img/wn/${o.weather[0].icon}@2x.png" alt="${o.weather[0].description}">
      <p>${Math.round(o.main.temp)}°C</p>
    `,t.appendChild(d)})}function C(n,t){const o=document.getElementById("bg-video");let e="./public/videos/default.mp4";const i=t&&t.includes("n");n==="Clear"?e=i?"./public/videos/clear-night.mp4":"./public/videos/sunny.mp4":n==="Rain"?e=i?"./public/videos/rain-night.mp4":"./public/videos/rain.mp4":n==="Snow"?e=i?"./public/videos/snow-night.mp4":"./public/videos/snow.mp4":n==="Clouds"?e=i?"./public/videos/clouds-night.mp4":"./public/videos/clouds.mp4":n==="Thunderstorm"?e="./public/videos/thunder.mp4":n==="Drizzle"?e="./public/videos/drizzle.mp4":(n==="Mist"||n==="Fog")&&(e="./public/videos/fog.mp4"),o.src=e}function B(n){fetch(`https://api.openweathermap.org/data/2.5/weather?q=${n}&appid=${g}&units=metric&lang=ru`).then(t=>t.json()).then(t=>{t.cod===200?(l.textContent=t.name,p.textContent=`${Math.round(t.main.temp)}°C`,E.textContent=t.weather[0].description,$.textContent=`Влажность: ${t.main.humidity}%`,x.textContent=`Ветер: ${t.wind.speed} м/с, ${I(t.wind.deg)}`,u.src=`https://openweathermap.org/img/wn/${t.weather[0].icon}@4x.png`,u.alt=t.weather[0].description,C(t.weather[0].main,t.weather[0].icon),b(t.coord.lat,t.coord.lon)):l.textContent="Город не найден"})}S.addEventListener("click",()=>{const n=y.value.trim();n&&B(n)}),y.addEventListener("keypress",n=>{if(n.key==="Enter"){const t=y.value.trim();t&&B(t)}}),navigator.geolocation?navigator.geolocation.getCurrentPosition(D,H):l.textContent="Геолокация не работает...";function D(n){const t=n.coords.latitude,o=n.coords.longitude;fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${o}&appid=${g}&units=metric&lang=ru`).then(e=>e.json()).then(e=>{l.textContent=e.name,p.textContent=`${Math.round(e.main.temp)}°C`,E.textContent=e.weather[0].description,$.textContent=`Влажность: ${e.main.humidity}%`,x.textContent=`Ветер: ${e.wind.speed} м/с, ${I(e.wind.deg)}`,u.src=`https://openweathermap.org/img/wn/${e.weather[0].icon}@4x.png`,u.alt=e.weather[0].description,e.main.temp<20?p.style.color="blue":p.style.color="red",C(e.weather[0].main,e.weather[0].icon),b(t,o)})}function H(){l.textContent="Не удалось получить местоположение..."}function I(n){const t=Math.floor(n/22.5+.5),o=["С","СВ","В","ЮВ","Ю","ЮЗ","З","СЗ"];return o[t%o.length]}function b(n,t){fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${n}&lon=${t}&appid=${g}&units=metric&lang=ru`).then(o=>o.json()).then(o=>{const e={};o.list.forEach(c=>{const s=new Date(c.dt_txt).toISOString().split("T")[0];e[s]||(e[s]=[]),e[s].push(c)});const i=document.getElementById("week-forecast");i.innerHTML="",Object.keys(e).forEach((c,L)=>{if(L===0)return;const s=e[c];let w=1/0,v=-1/0,m=s.find(r=>r.dt_txt.includes("12:00:00"));m||(m=s[Math.floor(s.length/2)]),s.forEach(r=>{r.main.temp_min<w&&(w=r.main.temp_min),r.main.temp_max>v&&(v=r.main.temp_max)});const a=document.createElement("div");a.className="day-card",a.dataset.date=c,a.innerHTML=`
          <p class="day-name">${new Date(c).toLocaleDateString("ru-RU",{weekday:"long"})}</p>
          <img src="https://openweathermap.org/img/wn/${m.weather[0].icon}@2x.png" id="weather-icon" alt="${m.weather[0].description}">
          <p>${m.weather[0].description}</p>
          <p>Мин: ${Math.round(w)}°C | Макс: ${Math.round(v)}°C</p>
        `,i.appendChild(a),a.addEventListener("click",()=>{document.querySelectorAll(".day-card").forEach(r=>r.classList.remove("active")),a.classList.add("active"),f(e[c])})});const d=Object.keys(e)[0];f(e[d]),document.getElementById("first-card").addEventListener("click",()=>{document.querySelectorAll(".day-card").forEach(c=>c.classList.remove("active")),f(e[d])})})}});const M=document.getElementById("bg-video"),k=document.getElementById("preloader");M.addEventListener("canplaythrough",()=>{k.style.opacity="0",setTimeout(()=>{k.style.display="none"},500)});
