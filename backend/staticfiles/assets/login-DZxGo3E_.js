document.addEventListener("DOMContentLoaded",function(){const r=document.querySelector("form"),s=r.querySelector("input[type='text']"),c=r.querySelector("input[type='password']");r.querySelector("button").addEventListener("click",function(n){n.preventDefault();const o=s.value.trim(),t=c.value;if(!o||!t){alert("Пожалуйста, заполните все поля");return}fetch("/api/login/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":i("csrftoken")},body:JSON.stringify({username:o,password:t})}).then(e=>e.json()).then(e=>{e.success?(alert("Успешный вход"),window.location.href="/"):alert(e.error||"Ошибка входа")}).catch(e=>{console.error("Ошибка:",e),alert("Что-то пошло не так")})});function i(n){const o=document.cookie.split(";");for(let t=0;t<o.length;t++){const e=o[t].trim();if(e.startsWith(n+"="))return decodeURIComponent(e.substring(n.length+1))}return null}});
