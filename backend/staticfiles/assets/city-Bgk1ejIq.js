/* empty css              */document.addEventListener("DOMContentLoaded",()=>{const h="a9c23e068a0e62f0ae23ab4a0336b395",g=document.getElementById("search-input"),x=document.getElementById("search-btn"),y=document.getElementById("city"),C=document.getElementById("temp"),L=document.getElementById("description"),k=document.getElementById("humidity"),S=document.getElementById("wind"),f=document.getElementById("weather-icon"),T=document.getElementById("accButton"),r=document.getElementById("accSett"),_=document.getElementById("closeSett"),w=document.getElementById("bg-video"),E=document.getElementById("preloader");w.addEventListener("canplaythrough",()=>{E.style.opacity="0",setTimeout(()=>{E.style.display="none"},500)}),T?.addEventListener("click",()=>{r.style.display=r.style.display==="flex"?"none":"flex"}),_?.addEventListener("click",()=>{r.style.display=r.style.display==="flex"?"none":"flex"});function b(e){const t=Math.floor(e/22.5+.5),o=["С","СВ","В","ЮВ","Ю","ЮЗ","З","СЗ"];return o[t%o.length]}function q(e,t){const o=t&&t.includes("n");let n="/static/videos/default.mp4";e==="Clear"?n=o?"/static/videos/clear-night.mp4":"/static/videos/sunny.mp4":e==="Rain"?n=o?"/static/videos/rain-night.mp4":"/static/videos/rain.mp4":e==="Snow"?n=o?"/static/videos/snow-night.mp4":"/static/videos/snow.mp4":e==="Clouds"?n=o?"/static/videos/clouds-night.mp4":"/static/videos/clouds.mp4":e==="Thunderstorm"?n="/static/videos/thunder.mp4":e==="Drizzle"?n="/static/videos/drizzle.mp4":(e==="Mist"||e==="Fog")&&(n="/static/videos/fog.mp4"),w.src=n}function D(e){fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${h}&units=metric&lang=ru`).then(t=>t.json()).then(t=>{if(t.cod!==200)throw new Error("City not found");y.textContent=t.name,C.textContent=`${Math.round(t.main.temp)}°C`,L.textContent=t.weather[0].description,k.textContent=`Влажность: ${t.main.humidity}%`,S.textContent=`Ветер: ${t.wind.speed} м/с, ${b(t.wind.deg)}`,f.src=`https://openweathermap.org/img/wn/${t.weather[0].icon}@4x.png`,f.alt=t.weather[0].description,q(t.weather[0].main,t.weather[0].icon),H(t.coord.lat,t.coord.lon)}).catch(()=>{y.textContent="Город не найден"})}function H(e,t){fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&appid=${h}&units=metric&lang=ru`).then(o=>o.json()).then(o=>{const n={};o.list.forEach(s=>{const c=new Date(s.dt_txt).toISOString().split("T")[0];n[c]||(n[c]=[]),n[c].push(s)});const m=document.getElementById("week-forecast");m.innerHTML="",Object.keys(n).forEach((s,B)=>{if(B===0)return;const c=n[s];let l=1/0,p=-1/0,u=c.find(i=>i.dt_txt.includes("12:00:00"))||c[Math.floor(c.length/2)];c.forEach(i=>{i.main.temp_min<l&&(l=i.main.temp_min),i.main.temp_max>p&&(p=i.main.temp_max)});const d=document.createElement("div");d.className="day-card",d.innerHTML=`
            <p class="day-name">${new Date(s).toLocaleDateString("ru-RU",{weekday:"long"})}</p>
            <img src="https://openweathermap.org/img/wn/${u.weather[0].icon}@2x.png" id="weather-icon" alt="${u.weather[0].description}">
            <p>${u.weather[0].description}</p>
            <p>Мин: ${Math.round(l)}°C | Макс: ${Math.round(p)}°C</p>
          `,m.appendChild(d),d.addEventListener("click",()=>{document.querySelectorAll(".day-card").forEach(i=>i.classList.remove("active")),d.classList.add("active"),v(n[s])})});const a=Object.keys(n)[0];v(n[a])})}function v(e){const t=document.getElementById("hours");t.innerHTML="",e.forEach(o=>{const m=new Date(o.dt_txt).getHours().toString().padStart(2,"0"),a=document.createElement("div");a.className="hour-card",a.innerHTML=`
        <p>${m}:00</p>
        <img src="https://openweathermap.org/img/wn/${o.weather[0].icon}@2x.png" alt="${o.weather[0].description}">
        <p>${Math.round(o.main.temp)}°C</p>
      `,t.appendChild(a)})}function I(){const e=g.value.trim();e&&(window.location.href=`/search/?q=${encodeURIComponent(e)}`)}const $=new URLSearchParams(window.location.search).get("q");$&&D($),x?.addEventListener("click",I),g?.addEventListener("keydown",e=>{e.key==="Enter"&&I()})});
